参考：https://blog.csdn.net/a745233700/article/details/120814088
hash算法用于解决分布式缓存的问题，当有多个机器可以提供缓存时，我们希望缓存的数据尽可能均匀得分布到多台机器上。

（1）普通hash算法
利用hash函数及服务器数量N，将数据进行分桶存储，数据所属桶=hash(data key)%N，这个方案在服务器数量固定时可以很好得工作，但是一旦服务器数量发生变化（例如服务器宕机、服务器扩容），就会导致短时间内大量数据所属桶发生变化，进而产生缓存穿透、缓存雪崩问题。

（2）一致性hash算法
不同于普通hash，一致性hash不是对服务器数量取模，而是对2^32取模，具体步骤如下
1）一致性hash算法将整个空间当成一个圆，成为hash环
2）对各个服务器进行hash（一般是使用服务器主机名或者服务器ip），从而确定服务器在hash环上的位置
3）对数据进行hash，确定数据在hash环上的位置
4）从数据点开始，顺时针遇见的第一个服务器，就是该数据存放的服务器
当服务器宕机后，只需移除hash环上该服务器对应的点即可，原本存放在该服务器上的数据会迁移到hash环上的下一个服务上，因此只会有少量数据发生迁移。
当服务器扩容后，只需在hash环上增加一个对应的点，将原本存放在下一个服务器上的部分数据，迁移到新服务器上即可，此时也只有少量数据发生迁移。
但是此算法也有一个问题，就是数据倾斜问题，在服务器数量较少时会产生hash环上的服务器点过于集中，进而导致大部分数据缓存在一个服务器上。

（3）一致性hash算法+虚拟节点
在服务器数量较少的情况下，我们可以使用虚拟节点的方式，解决数据倾斜问题。虚拟节点本质上是通过增加节点的方式解决数据倾斜问题。
将一台服务器虚拟出多个虚拟节点，对应hash环上的多个位置，人为的使节点数量增加，以解决数据倾斜问题。

